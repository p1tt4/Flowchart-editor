<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="css/font.css" rel="stylesheet" type="text/css">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="css/style.css" media="screen" />
    <title>Chart Editor</title>
  </head>

  <body>
    <header>
      <h1>Chart Editor</h1>
        <a href=">
          <img class="gh-forkme" src="https://s3.amazonaws.com/github/ribbons/forkme_right_white_ffffff.png" alt="GitHub">
        </a>
    </header>

    <div id="main">
      <section id="flowchart">
        <table align="center" class="inner">
          <tr>
            <h1 class="section-header"><a href="https://github.com/adrai/flowchart.js" target="_blank" style>Flowchart</a></h1>
          </tr>

          <tr>
            <td class="editor-header">
              <h3>Edit your code</h3>
            </td>
            <td>
              <div class="diagram-header">
                <div><h3>This the diagram</h3></div>
                <div class="download-wrapper"><a href="#" class="download">Download as SVG</a></div>
              </div>
            </td>
          </tr>

          <tr>
            <td style="vertical-align: top;">
            <div class="editor-wrapper">
  <div class="editor editor1">st=>start: Improve your
l10n process!
e=>end: Continue to have fun!:>https://youtu.be/YQryHo1iHb8[blank]
op1=>operation: Go to locize.com:>https://locize.com[blank]
sub1=>subroutine: Read the awesomeness
cond(align-next=no)=>condition: Interested to
getting started?
io=>inputoutput: Register:>https://www.locize.io/register[blank]
sub2=>subroutine: Read about improving
your localization workflow
or another source:>https://medium.com/@adrai/8-signs-you-should-improve-your-localization-process-3dc075d53998[blank]
op2=>operation: Login:>https://www.locize.io/login[blank]
cond2=>condition: valid password?
cond3=>condition: reset password?
op3=>operation: send email
sub3=>subroutine: Create a demo project
sub4=>subroutine: Start your real project
io2=>inputoutput: Subscribe

st->op1->sub1->cond
cond(yes)->io->op2->cond2
cond2(no)->cond3
cond3(no,bottom)->op2
cond3(yes)->op3
op3(right)->op2
cond2(yes)->sub3
sub3->sub4->io2->e
cond(no)->sub2(right)->op1

st@>op1({"stroke":"Red"})@>sub1({"stroke":"Red"})@>cond({"stroke":"Red"})@>io({"stroke":"Red"})@>op2({"stroke":"Red"})@>cond2({"stroke":"Red"})@>sub3({"stroke":"Red"})@>sub4({"stroke":"Red"})@>io2({"stroke":"Red"})@>e({"stroke":"Red","stroke-width":6,"arrow-end":"classic-wide-long"})</div>
           </div>
           <!--   Theme:
            <select class="theme">
              <option value="simple">Simple</option>
              <option value="hand" selected>Hand drawn</option>
            </select> -->
            </td>
            <td >
              <div class="diagram diagram1"></div>
            </td>
          </tr>
        </table>
      </section>

      <section id="sequence-diagram">
        <table align="center" class="inner">
          <tr>
            <h1 class="section-header"><a href="https://github.com/bramp/js-sequence-diagrams" target="_blank" style>Sequence diagram</a></h1>
          </tr>

          <tr>
            <td class="editor-header">
              <h3>Edit your code</h3>
            </td>
            <td>
              <div class="diagram-header">
                <div><h3>This the diagram</h3></div>
                <div class="download-wrapper"><a href="#" class="download">Download as SVG</a></div>
              </div>
            </td>
          </tr>

          <tr>
            <td style="vertical-align: top;">
            <div class="editor-wrapper">
              <div class="editor editor2">Andrew->China: Says Hello
Note right of China: China thinks\nabout it
China-->Andrew: How are you?
Andrew->>China: I am good thanks!</div>
            </div>
           <!--   Theme:
            <select class="theme">
              <option value="simple">Simple</option>
              <option value="hand" selected>Hand drawn</option>
            </select> -->
            </td>
            <td >
              <div class="diagram diagram2"></div>
            </td>
          </tr>
        </table>
      </section>

      <section id="sequence-diagram">
        <table align="center" class="inner">
          <tr>
            <h1 class="section-header"><a href="https://github.com/bramp/js-sequence-diagrams" target="_blank id="flowchart-docs"" style>Flowchart Docs</a></h1>
          </tr>
          <tr>
            <td>
<pre>
&lt;div id=&quot;diagram&quot;&gt;&lt;/div&gt;
&lt;script&gt;
  var diagram = flowchart.parse(&quot;the code definition&quot;);
  diagram.drawSVG('diagram');

  // you can also try to pass options:

  diagram.drawSVG('diagram', {
                              'x': 0,
                              'y': 0,
                              'line-width': 3,
                              'line-length': 50,
                              'text-margin': 10,
                              'font-size': 14,
                              'font-color': 'black',
                              'line-color': 'black',
                              'element-color': 'black',
                              'fill': 'white',
                              'yes-text': 'yes',
                              'no-text': 'no',
                              'arrow-end': 'block',
                              'scale': 1,
                              // style symbol types
                              'symbols': {
                                'start': {
                                  'font-color': 'red',
                                  'element-color': 'green',
                                  'fill': 'yellow'
                                },
                                'end':{
                                  'class': 'end-element'
                                }
                              },
                              // even flowstate support ;-)
                              'flowstate' : {
                                'past' : { 'fill' : '#CCCCCC', 'font-size' : 12},
                                'current' : {'fill' : 'yellow', 'font-color' : 'red', 'font-weight' : 'bold'},
                                'future' : { 'fill' : '#FFFF99'},
                                'request' : { 'fill' : 'blue'},
                                'invalid': {'fill' : '#444444'},
                                'approved' : { 'fill' : '#58C4A3', 'font-size' : 12, 'yes-text' : 'APPROVED', 'no-text' : 'n/a' },
                                'rejected' : { 'fill' : '#C45879', 'font-size' : 12, 'yes-text' : 'n/a', 'no-text' : 'REJECTED' }
                              }
                            });
&lt;/script&gt;
</pre>
            </td>
          </tr>


          <tr>
            <td>
              <h1 class="section-header"><a href="https://github.com/bramp/js-sequence-diagrams" target="_blank id="sequence-docs"" style>Sequence-diagram Docs</a></h1>
            </td>
          </tr>
          
          <tr>
            <td>
              <h3>Syntax</h3>
              <div class="center"><img src="images/sequence-grammar.png"/></div>
            </td>
          </tr>
          
        </table>
      </section>




    <!-- Needed for the text editors -->
    <script src="js/jquery.min.js"></script>
    <script src="ace.js" type="text/javascript" charset="utf-8"></script>

    <script src="js/underscore-min.js"></script>
    <script src="js/raphael-min.js"></script>
    <script src="js/flowchart-latest.js"></script>

    <script src="js/webfont.js"></script>
    <script src="js/snap.svg-min.js"></script>
    <script src="js/sequence-diagram-snap-min.js"></script>

    <script src="js/svginnerhtml.min.js"></script>

    <script type="text/javascript">

      function flowchart_setup_editor(div) {

        var editor_div = div.find(".editor1");
        var diagram_div = div.find(".diagram1");
        var theme_div = div.find(".theme1");
        var download_link = div.find('.download');

        // Setup the editor diagram
        var editor = ace.edit(editor_div.get(0));
        editor.setTheme("ace/theme/crimson_editor");
        editor.getSession().setMode("ace/mode/asciidoc");
        editor.getSession().on('change', _.debounce(on_change, 100));

        download_link.click(function(ev) {
          var svg = diagram_div.find('svg')[0];
          var width = parseInt(svg.width.baseVal.value);
          var height = parseInt(svg.height.baseVal.value);
          var data = editor.getValue();
          var xml = '<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[' + data + ']]></source>' + svg.innerHTML + '</svg>';

          var a = $(this);
          a.attr("download", "diagram.svg"); // TODO I could put title here
          a.attr("href", "data:image/svg+xml," + encodeURIComponent(xml));
        });

        theme_div.change(on_change);
        on_change();

        function on_change() {
          try {
            var diagram = flowchart.parse(editor.getValue());
            editor.getSession().setAnnotations([]);

            // Clear out old diagram
            diagram_div.html('');

            // Draw the SVG if the editor gets a value
            if (editor.getValue()) diagram.drawSVG(diagram_div.get(0));

          } catch(err) {
            var annotation = {
              type: "error", // also warning and information
              column: 0,
              row: 0,
              text: err.message
            };
            if (err && err.loc) {
              annotation.row    = err.loc.first_line - 1;
              annotation.column = err.loc.first_column;
            }
            editor.getSession().setAnnotations([annotation]);
            throw err;
          }
        }
      }

      $(document).ready(function() {
        flowchart_setup_editor($('#flowchart'));
      });


      function seq_diagram_setup_editor(div) {

        var editor_div = div.find(".editor2");
        var diagram_div = div.find(".diagram2");
        var theme_div = div.find(".theme2");
        var download_link = div.find('.download');

        // Setup the editor diagram
        var editor = ace.edit(editor_div.get(0));
        editor.setTheme("ace/theme/crimson_editor");
        editor.getSession().setMode("ace/mode/asciidoc");
        editor.getSession().on('change', _.debounce(on_change, 100));

        download_link.click(function(ev) {
          var svg = diagram_div.find('svg')[0];
          var width = parseInt(svg.width.baseVal.value);
          var height = parseInt(svg.height.baseVal.value);
          var data = editor.getValue();
          var xml = '<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="' + width + '" height="' + height + '" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[' + data + ']]></source>' + svg.innerHTML + '</svg>';

          var a = $(this);
          a.attr("download", "diagram.svg"); // TODO I could put title here
          a.attr("href", "data:image/svg+xml," + encodeURIComponent(xml));
        });

        theme_div.change(on_change);
        on_change();

        function on_change() {
          try {
            var diagram = Diagram.parse(editor.getValue());

            editor.getSession().setAnnotations([]);

            // Clear out old diagram
            diagram_div.html('');

            var options = {
              theme: "simple",
              scale: 1
            };

            // Draw
            diagram.drawSVG(diagram_div.get(0), options);

          } catch(err) {
            var annotation = {
              type: "error", // also warning and information
              column: 0,
              row: 0,
              text: err.message
            };
            if (err instanceof Diagram.ParseError) {
              annotation.row    = err.loc.first_line - 1;
              annotation.column = err.loc.first_column;
            }
            editor.getSession().setAnnotations([annotation]);
            throw err;
          }
        }
      }

      $(document).ready(function() {
        seq_diagram_setup_editor($('#sequence-diagram'));
      });


    </script>
  </body>
</html>

